<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Loki: Loki::ContractChecker&lt; Host, ExceptionPolicy &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Loki
   &#160;<span id="projectnumber">0.1.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00326.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="a00323.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Loki::ContractChecker&lt; Host, ExceptionPolicy &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;Checker.h&gt;</code></p>

<p>Inherits ExceptionPolicy&lt; Host &gt;.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae1aaa5a3d022fee418b2dc0083a533a5"><td class="memItemLeft" align="right" valign="top"><a id="ae1aaa5a3d022fee418b2dc0083a533a5"></a>
typedef bool(Host::*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a>) (void) const</td></tr>
<tr class="memdesc:ae1aaa5a3d022fee418b2dc0083a533a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature for the validation function. <br /></td></tr>
<tr class="separator:ae1aaa5a3d022fee418b2dc0083a533a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a47a88a788d4099204e3a49593e4ff2a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#a47a88a788d4099204e3a49593e4ff2a2">ContractChecker</a> (const Host *host, <a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a> validator, <a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a> pre=0, <a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a> post=0)</td></tr>
<tr class="separator:a47a88a788d4099204e3a49593e4ff2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac668398deabba5291b9025b4ac4eafd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#aac668398deabba5291b9025b4ac4eafd">~ContractChecker</a> (void)</td></tr>
<tr class="separator:aac668398deabba5291b9025b4ac4eafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac813d26d8a71fdd85dbc8c39a1a19325"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00326.html#ac813d26d8a71fdd85dbc8c39a1a19325">Check</a> (void) const</td></tr>
<tr class="separator:ac813d26d8a71fdd85dbc8c39a1a19325"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Host, template&lt; class &gt; class ExceptionPolicy&gt;<br />
class Loki::ContractChecker&lt; Host, ExceptionPolicy &gt;</h3>

<p>This class determines if a function violated any class invariant, but it also determines if a function fulfills its contract with client code. In the "Design by Contract" paradigm, each function has certain pre-conditions and post-conditions which may differ from the class invariants. This asserts if a check for an invariant fails as well as if any pre- or post-condition fails. It also demonstrate which exception safety level a function provides.</p>
<dl class="section user"><dt>Usage</dt><dd><ol type="1">
<li>Implement a function that checks each class invariant. The function must have the signature similar to the Validator type. Something like: "bool Host::IsValid( void ) const;"<ul>
<li>The function should return true if everything is okay, but false if something is wrong.</li>
<li>Or it could assert if anything is wrong.</li>
<li>Ideally, it should be private.</li>
</ul>
</li>
<li>Implement similar functions to check for pre-conditions and post-conditions. Functions which verify pre-conditions and post-conditions do not need to check all class invariants, just conditions specific to certain public functions in the host class.</li>
<li>Declare some typedef's inside the class declaration like these. Make one typedef for each exception policy you use. I typedef'ed the <a class="el" href="a00322.html">CheckForNothing</a> policy as CheckInvariants because even if a function can't provide either the no-throw nor the no-change policies, it should still make sure the object remains in a valid state.<ul>
<li>typedef ::Loki::ContractChecker&lt; Host, ::Loki::CheckForNoThrow  &gt; <a class="el" href="a00306.html">CheckForNoThrow</a>;</li>
<li>typedef ::Loki::ContractChecker&lt; Host, ::Loki::CheckForNoChange &gt; <a class="el" href="a00310.html">CheckForNoChange</a>;</li>
<li>typedef ::Loki::ContractChecker&lt; Host, ::Loki::CheckForEquality &gt; <a class="el" href="a00318.html">CheckForEquality</a>;</li>
<li>typedef ::Loki::ContractChecker&lt; Host, ::Loki::CheckForNothing  &gt; CheckInvariants;</li>
</ul>
</li>
<li>Construct a checker near the top of each member function - except in the validator member function. Pass the this pointer and the address of your validator function into the checker's constructor. You may also pass in pointers to function which check pre- and post-conditions.<ul>
<li>If the function never throws, then use the <a class="el" href="a00306.html">CheckForNoThrow</a> policy.</li>
<li>If the function never changes any data members, then use <a class="el" href="a00318.html">CheckForEquality</a> policy.</li>
<li>If the function's normal execution flow changes data, but must make sure data remains unchanged when any exceptions occur, then use the <a class="el" href="a00310.html">CheckForNoChange</a> policy.</li>
<li>Otherwise use the CheckInvariants policy.</li>
</ul>
</li>
<li>Recompile a debug version of your program, run the program and all the unit tests, and look for which assertions failed. </li>
</ol>
</dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a47a88a788d4099204e3a49593e4ff2a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a88a788d4099204e3a49593e4ff2a2">&#9670;&nbsp;</a></span>ContractChecker()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Host , template&lt; class &gt; class ExceptionPolicy&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00326.html">Loki::ContractChecker</a>&lt; Host, ExceptionPolicy &gt;::<a class="el" href="a00326.html">ContractChecker</a> </td>
          <td>(</td>
          <td class="paramtype">const Host *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a>&#160;</td>
          <td class="paramname"><em>validator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a>&#160;</td>
          <td class="paramname"><em>pre</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00326.html#ae1aaa5a3d022fee418b2dc0083a533a5">Validator</a>&#160;</td>
          <td class="paramname"><em>post</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The constructor makes sure the host is valid at the time the checker was created, thus insuring the host object was not corrupt from the start. </p><dl class="section user"><dt>host Pointer to host object.</dt><dd></dd></dl>
<dl class="section user"><dt>validator Pointer to function that checks class invariants.</dt><dd></dd></dl>
<dl class="section user"><dt>pre Optional pointer to function that checks pre-conditions.</dt><dd></dd></dl>
<dl class="section user"><dt>post Optional pointer to function that checks post-conditions.</dt><dd></dd></dl>

<p class="reference">References <a class="el" href="a00326.html#ac813d26d8a71fdd85dbc8c39a1a19325">Loki::ContractChecker&lt; Host, ExceptionPolicy &gt;::Check()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00326_a47a88a788d4099204e3a49593e4ff2a2_cgraph.png" border="0" usemap="#a00326_a47a88a788d4099204e3a49593e4ff2a2_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aac668398deabba5291b9025b4ac4eafd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac668398deabba5291b9025b4ac4eafd">&#9670;&nbsp;</a></span>~ContractChecker()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Host , template&lt; class &gt; class ExceptionPolicy&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00326.html">Loki::ContractChecker</a>&lt; Host, ExceptionPolicy &gt;::~<a class="el" href="a00326.html">ContractChecker</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The destructor checks if any Host invariants failed, and then calls the ExceptionPolicy's Check function to determine what to do in case of an exception. </p>

<p class="reference">References <a class="el" href="a00326.html#ac813d26d8a71fdd85dbc8c39a1a19325">Loki::ContractChecker&lt; Host, ExceptionPolicy &gt;::Check()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00326_aac668398deabba5291b9025b4ac4eafd_cgraph.png" border="0" usemap="#a00326_aac668398deabba5291b9025b4ac4eafd_cgraph" alt=""/></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac813d26d8a71fdd85dbc8c39a1a19325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac813d26d8a71fdd85dbc8c39a1a19325">&#9670;&nbsp;</a></span>Check()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Host , template&lt; class &gt; class ExceptionPolicy&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="a00326.html">Loki::ContractChecker</a>&lt; Host, ExceptionPolicy &gt;::Check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This first checks the invariants for <a class="el" href="a00326.html">ContractChecker</a>, and then calls the validator function for the host to make sure no class invariants were broken by the host within the Host's member function body. The host member function can call Check directly to verify the object remains valid at any time. This does not care if the pre- and post-condition validator pointers are null since a host class may pass in NULL pointers for either to indicate the pre-conditions or post-conditions are the same as the overall class invariants. </p>

<p class="reference">Referenced by <a class="el" href="a00326.html#a47a88a788d4099204e3a49593e4ff2a2">Loki::ContractChecker&lt; Host, ExceptionPolicy &gt;::ContractChecker()</a>, and <a class="el" href="a00326.html#aac668398deabba5291b9025b4ac4eafd">Loki::ContractChecker&lt; Host, ExceptionPolicy &gt;::~ContractChecker()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="a00014.html">Checker.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00176.html">Loki</a></li><li class="navelem"><a class="el" href="a00326.html">ContractChecker</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
